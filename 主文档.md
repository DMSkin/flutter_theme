## Flutter Theme、ThemeData 和 Style 以及布局全解析

> ####  本文即不是“权威指南”，也不是什么“科教圣经”，仅是个人理解，如果读者有其他理解，可以在评论区留言讨论。

#### 前言

- 写这个文章的目的，一是备忘录，记录几年来学到的Flutter知识。二是分享给学习Flutter的人。
- 中文网络上搜索Flutter的Theme和Style相关的文章都太简陋，并且充斥着机器翻译以及Copy，没有融入个人理解，初学着实困难，这篇文章会更注重个人理解，以便于学习和记忆。


目录：

* MaterialApp 下的 theme、darkTheme、themeMode
* Brightness 全解析
* ThemeData 全解析
* AppBarTheme 最容易忽视的主题设置
* 颜色设计以及对比度
* Dart代码格式建议
* Getx中的theme 和 textTheme，以及changeTheme


## MaterialApp 下的 theme、darkTheme、themeMode
在MaterialApp下面有常用的三个主题相关字段，
theme：白色主题
darkTheme：黑色主题
themeMode：主题模式
```DART
enum ThemeMode {
  system,// 跟随系统变化
  light,// 强制白色主题
  dark,// 强制黑色主题
}
```
默认只设置了theme，当不设置darkTheme的，不管什么时候，都不能切换到黑色模式，始终会显示白色主题。

## Brightness 全解析(部分机翻)
```DART
enum Brightness {
  /// 例如，颜色可能是深灰色，需要白色文本。
  dark,
  /// 例如，颜色可能是亮白色，需要黑色文本
  light,
}
```
Flutter中黑白相关的区分,都可以使用Brightness，
但是需要注意的是，有些地方Brightness可能是相反并且反直觉的。
比如在系统顶部状态栏中的Brightness和IconBrightness就是一个容易搞混的设置
```DART
SystemUiOverlayStyle(
  statusBarBrightness: Brightness.light,//状态栏的主题
  statusBarIconBrightness: Brightness.dark,//状态栏的图标主题，需要跟状态栏主题相反
)
```

## ThemeData 全解析
ThemeData 是Flutter样式主题中最重要最复杂的属性之一，有非常多的子项设置，文章不可能每个属性都讲清楚，但是重要的字段都会讲解。

## AppBarTheme 最容易忽视的主题设置， SystemUiOverlayStyle 非常重要
```DART
AppBarTheme(
  backgroundColor: Colors.white,// 背景色
  foregroundColor: Colors.black,// 前景色
  elevation: 0, // 高度
  toolbarHeight: kToolbarHeight,
  scrolledUnderElevation: 0, // 滚动高度
  surfaceTintColor: Colors.black, //叠加色
  systemOverlayStyle: 
   SystemUiOverlayStyle(
    statusBarColor: Colors.transparent, // 状态栏背景色
    statusBarBrightness: Brightness.light, // 状态栏主题
    statusBarIconBrightness: Brightness.dark, // 状态栏图标主题
    systemNavigationBarColor: Colors.white, // 导航栏背景色
    systemNavigationBarDividerColor: Colors.black //导航栏线条色
  ),
);
```
解析：
* 不要在AppBar内的Text 和 Button 中设置 color，而是通过AppbarTheme的foregroundColor 自动设置文本的颜色，
* toolbarHeight 默认设置是一个常量，double kToolbarHeight = 56.0，一般情况不要在 全局设置中设置为0或者其他值，保持它的默认值就好。
* elevation 高度，会产生阴影和叠加色。
* scrolledUnderElevation 滚动高度，是body内list组件滚动时就会产生的高度。
* systemNavigationBarColor 这个属性只有安卓有效（存疑），它是设置安卓底部小黑条后面的背景色
* statusBarColor ！！！ 再也不用去改安卓原生代码了，直接这里就可以设置沉浸式状态栏（存疑：安卓老版本可能有兼容问题）
  
> #### 个人理解，Flutter中的每一个页面 都用应该使用Scaffold作为最基础的组件，并且为这个Scaffold增加AppBar。
> #### 原因：AppBar中的SystemUiOverlayStyle，是设置手机 系统状态栏和系统导航栏的重要属性，如果不增加该配置，状态栏跟页面颜色可能会冲突

## 颜色设计以及对比度
点名批评：
* UI写的好看有什么用，功能稳定最重要。
* 谁会在意这个，这个东西(颜色)没人注意到，就这样吧
* 设计师（实习生）怎么设计，我就怎么做，效果跟我前端没关系

颜色的设计原则：
* 不要使用 饱和度（鲜艳）过高的颜色
* 注意使用 反色原则来设置文本颜色


## Dart代码格式建议
> 说到颜色设计规范，不得不提到Flutter中代码规范，请尽量将属性字段超过2个的逗号补全，增加 代码的可阅读性！！！！

![Image text](docs/代码格式错误示范.png)
